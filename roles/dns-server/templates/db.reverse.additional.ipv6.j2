;
;  -*- coding:utf-8 mode:jinja2 -*-
;
; 逆引き IPv6（複数ネットワーク対応）
; Copyright 2026 Takeharu KATO  All Rights Reserved.
; This file is generated by ansible.
;
{# 日付の取得 #}
; last update: {{ '%Y-%m-%d %H:%M:%S %Z' | strftime(ansible_date_time.epoch) }}
; This is the reverse zone file for IPv6 network {{ additional_network_cidr | default('', true) }}
; This file is used to map IPv6 addresses to hostnames.

$TTL 86400
@       IN      SOA     {{ dns_server|default('', true) }}. root.{{ dns_domain|default('', true) }}. (
        {{ bind_serial|default('', true) }} ;Serial
        3600            ;Refresh
        1800            ;Retry
        604800          ;Expire
        86400           ;Minimum TTL
)

       IN      NS       {{ dns_server|default('', true) }}.

; === 動的 DNS (nsupdate) レコード登録ゾーン ===
; 以下のネットワークアドレス範囲の逆引きレコード(PTR)は
; nsupdateで動的に登録してください。
;
{% if '/' in additional_network_cidr %}
; 登録対象ネットワーク: {{ additional_network_cidr }}
;
; 登録例:
; nsupdate -k /etc/bind/ddns.key
; > server 2001:db8::1
; > zone {{ additional_network_cidr | ipv6_reverse_zone(additional_network_cidr.split('/')[1] | int) }}.ip6.arpa.
; > update add 1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.a.1.6.0.4.8.6.6.9.6.d.f.ip6.arpa 3600 PTR hostname.example.org.
; > send
;
{% endif %}
