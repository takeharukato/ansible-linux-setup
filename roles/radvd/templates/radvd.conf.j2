#
#  -*- coding:utf-8 mode:bash -*-
# This file is generated by ansible.
{# 日付の取得 #}
# last update: {{ '%Y-%m-%d %H:%M:%S %Z' | strftime(ansible_date_time.epoch) }}

#
# {{ radvd_config_file_path }} 設定
#
interface {{ radvd_nic|default('ens192',true) }} {
        # ルーター広告を有効化
        AdvSendAdvert on;
        # ルーター広告の最小送信間隔を設定 (秒)
        MinRtrAdvInterval {{ radvd_router_advertisement_min_interval|default(30, true) }};
        # ルーター広告の最大待機間隔(広告周期)を設定 (秒)
        MaxRtrAdvInterval {{ radvd_router_advertisement_max_interval|default(100, true) }};
        # ルーター広告の可到達時間 (ミリ秒)
        AdvReachableTime {{ radvd_router_advertisement_reachable_time|default(3000, true) }};
        # ルーター広告の再送時間 (ミリ秒)
        AdvRetransTimer {{ radvd_router_advertisement_retrans_timer|default(1000, true) }};
        # ルーター広告の有効期限 (秒)
        AdvDefaultLifetime {{ radvd_router_advertisement_default_lifetime|default(300, true) }};

        # StateLess Address Auto Configuration (SLAAC)のみ使用し,
        # DHCPv6は使用しないのでManagedFlag, OtherConfigFlagはoffに設定
        # AdvAutonomousをonに設定し, SLAAC(自動アドレス設定)を有効化する
        # AdvOnLinkをonに設定し, プレフィックスのon-linkフラグを有効化する
        AdvManagedFlag off;
        AdvOtherConfigFlag off;

        # 広告するprefixを設定
        prefix {{ radvd_router_advertisement_prefix }} {
                # プレフィックスの有効期限 (秒, 'infinity'を指定すると無期限)
                AdvValidLifetime {{ radvd_router_advertisement_prefix_valid_lifetime|default('infinity', true) }};
                # プレフィックスの推奨期限 (秒, 'infinity'を指定すると無期限)
                AdvPreferredLifetime {{ radvd_router_advertisement_prefix_preferred_lifetime|default('infinity', true) }};
                # 自動アドレス設定を有効化 (Aフラグ)
                AdvAutonomous on;
                # on-linkフラグを有効化 (Lフラグ)
                AdvOnLink on;
        };

        # DNSサーバ情報を広告する
        RDNSS {{ radvd_dns_servers | default([]) | join(' ') }} {};
        # DNS-Serchdomain List (DNSサフィックス)を広告する
        DNSSL {{ radvd_search_domains | default([]) | join(' ') }} {};

};
