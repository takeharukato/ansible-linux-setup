#!/usr/bin/env bash
# -*-mode: bash; coding:utf-8-*-
# SPDX-License-Identifier: BSD-2-Clause
#
# Copyright (c) 2025 TAKEHARU KATO
# This file is distributed under the two-clause BSD license.
# For the full text of the license, see the LICENSE file in the project root directory.
# このファイルは2条項BSDライセンスの下で配布されています。
# ライセンス全文はプロジェクト直下の LICENSE を参照してください。
#
# OpenAI's ChatGPT partially generated this code.
# Author has modified some parts.
# OpenAIのChatGPTがこのコードの一部を生成しました。
# 著者が修正している部分があります。
#
# Dockerコンテナをユーザ権限で実行するためのスクリプト
#
# このスクリプトは, ユーザがDockerコンテナを実行する際に, ユーザのUIDとGIDをコンテナ内で使用するためのものです。
# これにより, コンテナ内で作成されたファイルの所有者がホスト側のユーザと一致するようになります。
# 使い方:
#   bash run-docker.sh [DOCKER_RUN_OPTIONS] IMAGE [COMMAND]
# 例:
#   bash run-docker.sh -v /home/user/data:/data my-image:latest
#
# This file is generated by ansible.
{# 日付の取得 #}
# last update: {{ '%Y-%m-%d %H:%M:%S %Z' | strftime(ansible_date_time.epoch) }}

if [ $# -gt 0 ]; then
    docker run \
	   -it \
	   -u "$(id -u $(whoami)):$(id -g $(whoami))" \
	   -v /etc:/etc:ro \
	   -v /usr:/usr:ro \
	   -v /home:/home \
	   $@
fi
