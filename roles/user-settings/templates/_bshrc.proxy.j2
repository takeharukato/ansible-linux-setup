#
# -*- coding:utf-8 mode:bash -*-
# This file is generated by ansible.
{# 日付の取得 #}
# last update: {{ '%Y-%m-%d %H:%M:%S %Z' | strftime(ansible_date_time.epoch) }}
#
# BSH用プロキシ設定
#
# シェル変数:
#
# proxy_server  プロキシサーバ (例: proxy_server="proxy.com")
# proxy_port    プロキシポート (例: proxy_port="8080")
# proxy_user    プロキシユーザ (例: proxy_user="alice")
# proxy_password  プロキシパスワード (例: proxy_password="passw0rd")
#
{% if proxy_server is defined and proxy_server|default('',true)|length %}
{# プロキシサーバが設定されている場合 #}
{% if proxy_port is defined and proxy_port|default('',true)|length %}
{# プロキシサーバとプロキシポートが設定されている場合 #}
{% if proxy_user is defined and proxy_user|default('',true)|length and proxy_password is defined and proxy_password|default('',true)|length %}
{#
 プロキシサーバ, プロキシポート, ユーザ, パスワードが設定されている場合,
 プロキシ認証付きの環境変数を出力
 #}
proxy_server="{{ proxy_server }}"
proxy_port="{{ proxy_port }}"
proxy_user="{{ proxy_user }}"
proxy_password="{{ proxy_password }}"

https_proxy="http://${proxy_user}:${proxy_password}@${proxy_server}:${proxy_port}"
http_proxy="http://${proxy_user}:${proxy_password}@${proxy_server}:${proxy_port}"
ftp_proxy="http://${proxy_user}:${proxy_password}@${proxy_server}:${proxy_port}"
{% else %}
{#
 プロキシサーバ, プロキシポートが設定されていて, かつ,
 ユーザ, パスワードのいずれかが設定されていない場合,
 プロキシ認証なしの環境変数を出力
 #}
proxy_server="{{ proxy_server }}"
proxy_port="{{ proxy_port }}"

https_proxy="http://${proxy_server}:${proxy_port}"
http_proxy="http://${proxy_server}:${proxy_port}"
ftp_proxy="http://${proxy_server}:${proxy_port}"
{% endif %}
{# プロキシ認証あり/なしでの共通部分 #}
no_proxy="{{no_proxy}}"

HTTPS_PROXY="${https_proxy}"
HTTP_PROXY="${http_proxy}"
FTP_PROXY="${ftp_proxy}"
NO_PROXY="${no_proxy}"

export https_proxy
export HTTPS_PROXY
export http_proxy
export HTTP_PROXY
export ftp_proxy
export FTP_PROXY
export no_proxy
export NO_PROXY
{% endif %}

{% endif %}
