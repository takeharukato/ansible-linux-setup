#
#  -*- coding:utf-8 mode:bash -*-
# This file is generated by ansible.
{# 日付の取得 #}
# last update: {{ '%Y-%m-%d %H:%M:%S %Z' | strftime(ansible_date_time.epoch) }}
#
# .ssh/config
#
{% if proxy_server is defined and proxy_server|default('',true)|length %}
{# プロキシサーバが設定されている場合 #}
{% if proxy_port is defined and proxy_port|default('',true)|length %}
{# プロキシサーバとプロキシポートが設定されている場合 #}
#
# プロキシ設定 (GitHubアクセスなどに使用)
#
{% if proxy_user is defined and proxy_user|default('',true)|length and proxy_password is defined and proxy_password|default('',true)|length %}
{#
 プロキシサーバ, プロキシポート, ユーザ, パスワードが設定されている場合,
 プロキシ認証付きの設定を出力
 #}
ProxyCommand env CONNECT_USER={{ proxy_user }} CONNECT_PASSWORD={{ proxy_password }} /usr/bin/connect-proxy -H {{ proxy_server }}:{{ proxy_port }} %h %p
{% else %}
{#
 プロキシサーバ, プロキシポートが設定されていて, かつ,
 ユーザ, パスワードのいずれかが設定されていない場合,
 プロキシ認証なしの設定を出力
 #}
ProxyCommand env /usr/bin/connect-proxy -H {{ proxy_server }}:{{ proxy_port }} %h %p
{% endif %}
{% endif %}
{% endif %}
ForwardAgent yes
ServerAliveInterval 30
StrictHostKeyChecking no
UserKnownHostsFile=/dev/null
{% for host in mdns_host_list %}
Host {{ host.name }}.local
{% endfor %}
{% for host in dns_host_list %}
Host {{ host.name }}.{{ dns_domain }}
{% if ssh_legacy_key_hosts is defined and (ssh_legacy_key_hosts | default([], true) | length) > 0 %}
{% if host.name in ssh_legacy_key_hosts %}
  #
  # 旧形式の鍵を受け付けるように設定
  #
  KexAlgorithms +diffie-hellman-group14-sha1
  HostKeyAlgorithms=+ssh-rsa
  PubkeyAcceptedAlgorithms=+ssh-rsa
{% endif %}
{% endif %}
{% endfor %}
Host github.com
  User git
  Port 22
  Hostname github.com
  TCPKeepAlive yes

Host ssh.github
  User git
  Port 22
  Hostname ssh.github.com
  TCPKeepAlive yes

Host gist.github.com
  User git
  Port 22
  Hostname gist.github.com
  TCPKeepAlive yes
