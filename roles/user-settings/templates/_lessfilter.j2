#!/usr/bin/env bash
#  -*- coding:utf-8 mode:bash -*-
# This file is generated by ansible.
{# 日付の取得 #}
# last update: {{ '%Y-%m-%d %H:%M:%S %Z' | strftime(ansible_date_time.epoch) }}
#
NKF=/usr/bin/nkf
if [ -x /usr/local/bin/nkf ]; then
    NKF=/usr/local/bin/nkf
fi
ORIGINAL_LESSOPEN=/usr/share/source-highlight/src-hilite-lesspipe.sh
CONV_UTF8_COMMAND="${NKF} -w"

conv_utf8() {
    $CONV_UTF8_COMMAND "$1"
}

if [ $# -eq 0 -o "$1" == "-" ] ; then # pipe
    conv_utf8 - 2> /dev/null
    else                                  # file
        if [ -x $ORIGINAL_LESSOPEN -a `$ORIGINAL_LESSOPEN "$1" | head | wc -c` -gt 0 ] ; then
	    $ORIGINAL_LESSOPEN "$1" | conv_utf8 - 2> /dev/null
	else
	    conv_utf8 "$1" 2> /dev/null
	fi
fi
