#  -*- coding:utf-8 mode:yaml -*-
#  Ansible playbook
#  Copyright 2020 Takeharu KATO All Rights Reserved.
#
#  タスクメイン部
#
#  include_tasksで他のタスクを読み込む
#
---

# 最初に変数設定を読み直す ( role単独で実行可能とするため )
- ansible.builtin.include_tasks: load-params.yml

# パッケージ関連タスクの読み込み（Ansible バージョンに基づいた分岐）
# deb822_repository モジュールは Ansible 2.15 以降で利用可能
- name: Include package tasks (Ansible >= 2.15)
  ansible.builtin.include_tasks: package.yml
  when: ansible_version.major > 2 or (ansible_version.major == 2 and ansible_version.minor >= 15)

- name: Include package tasks (Ansible < 2.15)
  ansible.builtin.include_tasks: package-on-rhel9.yml
  when: ansible_version.major < 2 or (ansible_version.major == 2 and ansible_version.minor < 15)

- ansible.builtin.include_tasks: directory.yml
- ansible.builtin.include_tasks: user_group.yml
- ansible.builtin.include_tasks: service.yml
- ansible.builtin.include_tasks: config.yml
