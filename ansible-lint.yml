#  -*- coding:utf-8 mode:yaml -*-
#  Ansible playbook
#  Copyright 2020 Takeharu KATO All Rights Reserved.
#
#  ansible-lintの設定ファイル
#
# - ansibleのロール命名規則に関するルールに
#   従っていなくてもエラーとしない(role-nameルール)
#   命名規則を特に決めていないため, 必要に応じて後で修正を実施する方針。
#
# - 変数名の命名規則に関するルールに従っていなくてもエラーとしない(var-namingルール)
#   命名規則を特に決めていないため, 必要に応じて後で修正を実施する方針。
#
# - Ansibleタスクのname:フィールドにテンプレート変数が含まれている場合に
#   エラーとするルール(name[template]ルール)を適用しない
#   後でまとめて対応する予定のため, 現時点ではエラーとしない方針。
#
# - YAMLファイルの行長が指定された文字数を超える場合にエラーとするルール
#   (yaml[line-length]ルール)を適用しない。URLやコマンドなどの長い文字列が
#   頻繁に出現するため, 現時点ではエラーとしない方針。
#
# - Jinjaテンプレート内のスペースに関するルール(jinja[spacing]ルール)を適用しない
#   k8s-ctrlplaneのconfig.ymlなどで, podSubnet_orderedやserviceSubnet_orderedなど
#   ','で区切られたリストを生成する必要があるため,
#   スペースを入れることが必ずしも正しいとは言えないことから,
#   エラーとしない方針とした。
#
# - タスク内で条件付き逐次処理として, when: <register_var> is changed パターンを
#   使用しているケース(no-handlerルール)。これらは, block内での
#   緊密な依存関係と即座の実行を必要とし, handler化による遅延実行は許容できない。
#   特に, additional-routes のnetplan適用や, k8s-worker の kernel parameter設定
#   とリブートは, 後続タスクの成功と必要な同期性に依存しているため, 現在の設計のまま
#   許容する方針。
#
# - packageモジュールで最新バージョンをインストールするタスクのnameに
#   latestという文字列が含まれていてもエラーとしない(package-latestルール)
#   セキュリティ修正などを取り込むため, 最新版数を使用するというルール
#   としているため
#
skip_list:
  - role-name
  - var-naming[pattern]
  - name[template]
  - yaml[line-length]
  - jinja[spacing]
  - no-handler
  - package-latest
exclude_paths:
  - docs
  - roles/*/files/_vc-tenant-completion
  - roles/*/files/vc-tenant-completion.bash
